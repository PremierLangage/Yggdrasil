

<script type="text/javascript" language="javascript" src="https://peter-ertl.com/jsme/JSME_2017-02-26/jsme/jsme.nocache.js"></script>

<script type="text/javascript">
	var count = 0;
	function addEditor() {
		count++;
		const id = 'JME' + count;
		const containers = $('#containers');
		containers.append("<div style='margin-bottom: 4px;' id='" + id + "'></div>");
		document[id] = new JSApplet.JSME(id, "100%", "240px", {
			//optional parameters
			"options" : "query,hydrogens",
		});
		document[id].deferredRepaint();
		const button = document.getElementById("button");
		if (button) {
			button.disabled=false;
		}
	}
	//this function will be called after the JavaScriptApplet code has been loaded.
	function jsmeOnLoad() {
		addEditor();
	}

	function getSmiles() {
		var data = document.JME.smiles();
		document.getElementById("form_coucou").value = data;
	}
	function getJMEstring() {
		var data = document.JME.jmeFile();
		document.getElementById("jme_output").value = data;
	}

	$('#submit_button').click(function() {
		const response = {};
		for (let i = 1; i <= count; i++) {
			let id = 'JME' + i;
			response[id] = document[id].smiles();
		}
		console.log(response);
	});
</script>
<div id="containers"></div>
<button class='btn btn-light' onclick='addEditor()'>+</button>
<input type="hidden"  id="form_anwser"/>



