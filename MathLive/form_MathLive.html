<meta charset="utf-8">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mathlive@0.26.0/dist/mathlive.core.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mathlive@0.26.0/dist/mathlive.css">
<style>
.mathfield {
    border: 1px solid #ddd;
    padding:5px;
    margin: 10px 0 10px 0;
    border-radius:5px;
    font-size: large;
    background-color: #fff;
}
#output {
    padding:5px;
    border: 1px solid #000;
}
</style>
<div class="mathfield" id='mf' ></div>
<input id='form_1'></div>

<script src="https://cdn.jsdelivr.net/npm/mathlive@0.26.0/dist/mathlive.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mathlive@0.26.0/dist/mathlive.mjs"></script>

<script> 

const mf = MathLive.makeMathField('mf', {

onContentDidChange: mathfield => {
try {
    const ast = MathLive.latexToAST(mathfield.latex());
    document.getElementById('form_1').value = JSON.stringify(ast);
} catch(e) {
    document.getElementById('form_1').value = 'ðŸ˜•';
}
},
virtualKeyboardMode: 'manual',
customVirtualKeyboardLayers: {
    'json': {
        "styles": "div.ML__keyboard div.json-backdrop > div > div > ul> li.keycap.btn{color:#fff;background:#37454F;border: 1px solid #37454F}",
        "backdrop": "json-backdrop",
        "container": "json-container",
        "rows": [
            [
                {
                    "class": "keycap",
                    "label": "7",
                },
                {
                    "class": "keycap",
                    "label": "8"
                },
                {
                    "class": "keycap",
                    "label": "9"
                },
                {
                    "class": "keycap btn",
                    "insert": "\\frac{#0}{#?}",
                    "label": "&divide;"
                },
                {
                    "class": "separator",
                },
                {
                    "class": "separator w20",
                }
            ],
            [
                {
                    "class": "keycap",
                    "label": "4"
                },
                {
                    "class": "keycap",
                    "label": "5"
                },
                {
                    "class": "keycap",
                    "label": "6"
                },
                {
                    "class": "keycap btn",
                    "insert": "\\times ",
                    "latex": "\\times "
                },
                {
                    "class": "separator",
                },
                {
                    "class": "separator w20",
                }
            ],
            [
                {
                    "class": "keycap",
                    "label": "1"
                },
                {
                    "class": "keycap",
                    "label": "2"
                },
                {
                    "class": "keycap",
                    "label": "3"
                },
                {
                    "class": "keycap btn",
                    "label": "-"
                },
                {
                    "class": "separator w15",
                },
                {
                    "class": "action font-glyph bottom right w15",
                    "command": "deletePreviousChar",
                    "label": "&#x232b;"
                }
            ],
            [
                {
                    "class": "keycap",
                    "insert": "",
                    "key": "0",
                    "command": "",
                    "label": "0"
                },
                {
                    "class": "keycap",
                    "insert": "",
                    "key": "",
                    "command": "",
                    "label": "."
                },
                {
                    "class": "keycap",
                    "insert": "\\pi ",
                    "key": "",
                    "command": "",
                    "label": "<aside class='above tex'>" +
                        "<i>x</i>&thinsp;!</aside>" +
                        "<span>Ï€</span>" +
                        "<aside class='below'>3.14</aside>"
                },
                {
                    "class": "keycap btn",
                    "label": "+"
                },
                {
                    "class": "action",
                    "command": "moveToPreviousChar",
                    "label": "<svg><use xlink:href='#svg-arrow-left' /></svg>"
                },
                {
                    "class": "action",
                    "command": "moveToNextChar",
                    "label": "<svg><use xlink:href='#svg-arrow-right' /></svg>"
                },
                {
                    "class": "action",
                    "command": "moveToNextPlaceholder",
                    "label": "<svg><use xlink:href='#svg-tab' /></svg>"
                }
            ]
        ]
    },   
    
},
customVirtualKeyboards: {
    'json': {
        label: 'json',
        tooltip: 'json keyboard',
        layer: 'json'
    },
},
virtualKeyboards: 'json'
});

</script>

