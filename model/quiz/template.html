{% if state == "active" %}  

<div class="btn-group mr-2" role="group" aria-label="First group">
<div type="button" class="btn rounded-0 badge-outline-secondary series-pill"><i class="fas fa-home"></i></div>
{% for i in range(nbstep) %}
<div class="btn rounded-0 badge-outline-secondary series-pill">{{i+1}}</div>
{% endfor %}
</div>

<div class="tab-content">
<div id="q0" class="container tab-pane active" style="padding-right: 0px;padding-left: 0px;">
{{ intro }}
<hr class="divide">
<button class="nexttab btn btn-primary" onclick="showNext(0)">Commencer</i></button>
</div>
{% for i in range(1, nbstep+1) %}
    <div id="q{{i}}" class="container tab-pane fade" style="padding-right: 0px;padding-left: 0px;">
    <div class="question">
    {{ questions[i-1]|markdown }}
    </div>
    <div style="display: block; margin-top: 1em;">
    {{ comp[i-1]|component }}
    </div>
    <hr class="divide">
    {% if i == nbstep %}
        <button class="btn btn-primary action-submit">Terminer</button>
    {% else %}
        <button class="nexttab btn btn-primary" onclick="showNext({{i}})">Suivant</i></button>
    {% endif %}
    </div>
{% endfor %}
</div>

{% else %}

<ul class="nav nav-pills" role="tablist">
<li class="nav-item">
    <a class="nav-link btn rounded-0 btn-outline-secondary series-pill" data-toggle="pill" href="#intro"><i class="fas fa-home"></i></a>
</li>
    {% for i in range(nbstep) %}
<li class="nav-item">
    {% if scores[i] == 100 %}
    <a class="series-pill nav-link btn rounded-0 btn-outline-success series-pill" data-toggle="pill" href="#q{{i}}">{{i+1}}</a>
    {% else %}
    <a class="series-pill nav-link btn rounded-0 btn-outline-danger series-pill" data-toggle="pill" href="#q{{i}}">{{i+1}}</a>
    {% endif %}
</li>
{% endfor %}
</ul>
<div class="tab-content">
<div id="intro" class="container tab-pane active" style="padding-right: 0px;padding-left: 0px;"><br>
Score : {{score}} / 100
</div>
{% for i in range(nbstep) %}
    <div id="q{{i}}" class="container tab-pane fade" style="padding-right: 0px;padding-left: 0px;"><br>
<div class="question">
{{ questions[i]|markdown }}
</div>
<div style="display: block; margin-top: 1em;">
{{ comp[i]|component }}
</div>
<hr class="divide">
{% if feedbacks[i]|length > 1 %}
<div class="feedback">
<i class="far fa-hand-point-right"></i> {{ feedback|safe }}
</div>
{% endif %}
{% if solutions[i]|length > 1 %}
<a class="text-success" style="display: block; margin-top: 1em;" data-toggle="collapse" href="#collapseSolution{{i}}" role="button" aria-expanded="false" aria-controls="collapseSolution">
Voir la solution.
</a>
<div class="collapse" id="collapseSolution{{i}}">
{{ solutions[i] }}
</div>
{% endif %}
</div>
{% endfor %}
</div>

{% endif %}

<script type="text/javascript">
function showNext(i){
    var current = document.getElementById("q" + String(i));
    var next = document.getElementById("q" + String(i+1));
    current.classList.remove('active');
    current.classList.add('fade');
    next.classList.remove('fade');
    next.classList.add('active');
}
</script>