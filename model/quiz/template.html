{% if state == "active" %}  

<div id="pill{{0}}" class="btn rounded-0 btn-outline-secondary series-pill active"><i class="fas fa-home"></i></div>
{% for i in range(1, nbstep+1) %}
<div id="pill{{i}}" class="btn rounded-0 btn-outline-secondary series-pill">{{i}}</div>
{% endfor %}

<div class="tab-content">
<div id="q0" class="series-tab container tab-pane active" style="padding-right: 0px;padding-left: 0px;">
{{ intro }}
<hr class="divide">
<button class="nexttab btn btn-primary" onclick="show(1)">Commencer</i></button>
</div>
{% for i in range(1, nbstep+1) %}
    <div id="q{{i}}" class="series-tab container tab-pane fade" style="padding-right: 0px;padding-left: 0px;">
    <div class="question">
    {{ questions[i-1]|markdown }}
    </div>
    <div style="display: block; margin-top: 1em;">
    {{ comp[i-1]|component }}
    </div>
    <hr class="divide">
    {% if i == nbstep %}
        <button class="btn btn-primary action-submit">Terminer</button>
    {% else %}
        <button class="nexttab btn btn-primary" onclick="show({{i+1}})">Suivant</i></button>
    {% endif %}
    </div>
{% endfor %}
</div>

{% else %}

<ul class="nav nav-pills" role="tablist">
<li class="nav-item">
    <a class="nav-link btn rounded-0 btn-outline-secondary series-pill" data-toggle="pill" href="#intro"><i class="fas fa-home"></i></a>
</li>
    {% for i in range(1, nbstep+1) %}
<li class="nav-item">
    {% if scores[i] == 100 %}
    <a class="series-pill nav-link btn rounded-0 btn-outline-success series-pill" data-toggle="pill" href="#q{{i}}">{{i+1}}</a>
    {% else %}
    <a class="series-pill nav-link btn rounded-0 btn-outline-danger series-pill" data-toggle="pill" href="#q{{i}}">{{i+1}}</a>
    {% endif %}
</li>
{% endfor %}
</ul>
<div class="tab-content">
<div id="intro" class="container tab-pane active" style="padding-right: 0px;padding-left: 0px;"><br>
Score : {{score}} / 100
</div>
{% for i in range(nbstep) %}
    <div id="q{{i}}" class="container tab-pane fade" style="padding-right: 0px;padding-left: 0px;"><br>
<div class="question">
{{ questions[i]|markdown }}
</div>
<div style="display: block; margin-top: 1em;">
{{ comp[i]|component }}
</div>
<hr class="divide">
{% if feedbacks[i]|length > 1 %}
<div class="feedback">
<i class="far fa-hand-point-right"></i> {{ feedback|safe }}
</div>
{% endif %}
{% if solutions[i]|length > 1 %}
<a class="text-success" style="display: block; margin-top: 1em;" data-toggle="collapse" href="#collapseSolution{{i}}" role="button" aria-expanded="false" aria-controls="collapseSolution">
Voir la solution.
</a>
<div class="collapse" id="collapseSolution{{i}}">
{{ solutions[i] }}
</div>
{% endif %}
</div>
{% endfor %}
</div>

{% endif %}

<script type="text/javascript">
function show(i){
    var pills = document.getElementsByClassName('series-pill active');
    for (j=0; j<pills.length; j++) {
        pills[j].classList.remove('active');
    }
    var tabs = document.getElementsByClassName('series-tab active');
    for (j=0; j<tabs.length; j++) {
        tabs[j].classList.remove('active');
        tabs[j].classList.add('fade');
    }
    var tab = document.getElementById("q" + String(i));
    var pill = document.getElementById("pill" + String(i));
    tab.classList.remove('fade');
    tab.classList.add('active');
    pill.classList.add('active');
}
</script>